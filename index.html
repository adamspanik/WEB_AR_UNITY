<!-- BEGIN: Top HTML -->
<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Navigation AR.js</title>	
<!-- include aframe -->
<script src="https://aframe.io/releases/1.2.0/aframe.js"></script>
<!-- include ar.js -->
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<!-- END: Top HTML -->
<!-- END: Unity Compiled Events -->

<!-- BEGIN: Middle HTML -->
<body style='margin : 0px; overflow: hidden; font-family: Monospace;'>

<!-- <a-scene embedded arjs='debugUIEnabled: false; sourceType: video; sourceUrl:../../data/videos/headtracking.mp4;'>
arjs='trackingMethod: best; patternRatio: 0.9; debugUIEnabled: false; maxDetectionRate:30;' antialias="true"
-->
<a-scene embedded arjs=’sourceType: webcam; trackingMethod:best;’ vr-mode-ui='enabled: false'>
<a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects: .intersectable; useWorldCoordinates: true;"></a-entity>
<!-- END: Middle HTML -->

<!-- BEGIN: Unity Compiled Assets -->
<a-assets>
	<img id="blue_arrow" src="images/blue_arrow.png"></img>
	<img id="white_arrow" src="images/white_arrow.png"></img>
	<img id="label" src="images/label.png"></img>
	<img id="label_stack2" src="images/label_stack2.png"></img>
	<img id="label_stack3" src="images/label_stack3.png"></img>
	<img id="door_icon" src="images/door_icon.png"></img>
	<img id="exit_icon" src="images/exit_icon.png"></img>
</a-assets>
<a-marker id="arrow_marker" type='pattern' url='markers/arrow_marker.patt' emitevents="true" smooth="true smoothCount="10" smoothTolerance="0.01" smoothThreshold="5"> 
  <a-entity lookathandler id="lookathandler" position="0 0 0" rotation="-90 0 0"></a-entity>
  <a-entity wrapper id="wrapper" position="0 0 0" emitevents="true">                                                                              

</a-marker>		

		
<a-entity camera></a-entity>
</a-scene>
<script>
var listOfArrows = [];
var wrapper;
const SCALE = 0.1; // 5
const R = 2.5;	
var arrowId = 0;
  
window.onload = () => {
  wrapper = document.querySelector('[wrapper]');
  drawDestinations();
};  
  
function toRadians(degrees) {
	return degrees * Math.PI / 180;
};

function toDegrees(radians) {
	return radians * 180 / Math.PI;
}
  
function drawDestinations(){ 
  console.log("test")
  for (var i = 0; i < 4; i++) {
  	var entityEl = createArrow(i*90);
   
  	listOfArrows.push(entityEl);
  	wrapper.appendChild(entityEl);
    
  }
  var entityEl2 = createCedule(90);
  wrapper.appendChild(entityEl2);
}
	
function createArrow(angle){	
  arrowId = arrowId + 1;
  var entityEl = document.createElement('a-image');
  entityEl.setAttribute('id', "arrow" + arrowId);
  entityEl.setAttribute('src', "#blue_arrow");
  entityEl.setAttribute('rotation', {x: -90, y: 0, z: angle});
  entityEl.setAttribute('scale', {x: 1.355, y: 3.92, z: 1});
  entityEl.setAttribute('position', {x: R*Math.cos(toRadians(angle+90)), y: 0, z: R*Math.sin(toRadians(angle-90))});
  
  return entityEl;
}

  
function createCedule(angle){
  var cedule = document.createElement('a-entity');
  cedule.setAttribute('id', "cedule" + arrowId);
  cedule.setAttribute('rotation', {x: -90, y: 0, z: 0});
  cedule.setAttribute('position', {x: R*Math.cos(toRadians(angle+90)), y: 0, z: R*Math.sin(toRadians(angle-90))});
  
  var label = document.createElement('a-image');
  label.setAttribute('id', "label" + arrowId);
  label.setAttribute('src', "#label");
  label.setAttribute('rotation', {x: 0, y: 0, z: angle});
  label.setAttribute('scale', {x: 1.52, y: 1.08, z: 0.1});
  label.setAttribute('position', {x: 0, y: 0, z: 0.1});
  
  var exit_icon = document.createElement('a-image');
  exit_icon.setAttribute('id', "exit_icon" + arrowId);
  exit_icon.setAttribute('src', "#exit_icon");
  exit_icon.setAttribute('rotation', {x: 0, y: 0, z: angle});
  exit_icon.setAttribute('scale', {x: 0.225, y: 0.225, z: 0.1});
  exit_icon.setAttribute('position', {x: -0.4, y: 0.2, z: 0.2});
  
  var text_q = document.createElement('a-image');
  text_q.setAttribute('text', "value:Q4234; shader: msdf; font:fonts/Roboto-Bold-msdf.json; negate:false; align:center; color:#343A3E");
  text_q.setAttribute('rotation', {x: 0, y: 0, z: angle});
  text_q.setAttribute('scale', {x: 1.52, y: 1.08, z: 0.1});
  text_q.setAttribute('position', {x: 0, y: 0, z: 0.1});
  
  var text_m = document.createElement('a-image');
  text_m.setAttribute('text', "value:150 m; shader: msdf; font:fonts/Roboto-Bold-msdf.json; negate:false; align:center; color:#B3B3B3");
  text_m.setAttribute('rotation', {x: 0, y: 0, z: angle});
  text_m.setAttribute('scale', {x: 4, y: 4, z: 4});
  text_m.setAttribute('position', {x: 0.2, y: -0.2, z: 0.2});



  cedule.appendChild(exit_icon);
  cedule.appendChild(label);
  cedule.appendChild(text_q);
  cedule.appendChild(text_m);
  
  return cedule;
}

</script>
</body>
</html>
